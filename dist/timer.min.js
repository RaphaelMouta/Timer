'use strict';
//
// Timer V 0.2.0
// by: Raphael Mouta
//
!function(t){function e(t){var e=Math.trunc(t/3600),i=Math.trunc((t-3600*e)/60),n=Math.trunc(t-3600*e-60*i);return(e>=10?e:"0"+e)+":"+(i>=10?i:"0"+i)+":"+(n>=10?n:"0"+n)}function i(t){if(null==t.type)throw"'type' setting can't be null.";if("asc"!=t.type.toLowerCase()&&"desc"!=t.type.toLowerCase())throw"'type' setting must be 'asc' or 'desc'";if("number"!=typeof t.initTime)throw"'initTime' setting value must be number greater than 0";if(t.initTime<0)throw"'initTime' setting must be greater than 0";if("number"!=typeof t.timeLimit&&!1!==t.timeLimit)throw"'timeLimit' setting value must be number greater than 0 or false.";if(t.timeLimit<0)throw"'timeLimit' setting must be greater than 0";if("asc"==t.type.toLowerCase()&&t.initTime>t.timeLimit)throw"'initTime' setting value must be less then 'timeLimit' setting value";if("desc"==t.type.toLowerCase()&&t.initTime<t.timeLimit)throw"'initTime' setting value must be greater than 'timeLimit' setting value";if("function"!=typeof t.onBegin||null==t.onBegin)throw"'onBegin' setting must be a function";if("function"!=typeof t.onComplete||null==t.onComplete)throw"'onComplete' setting must be a function";if("function"!=typeof t.onSecondComplete||null==t.onSecondComplete)throw"'onSecondCompvare' setting must be a function";if("function"!=typeof t.onStop||null==t.onStop)throw"'onStop' setting must be a function";if("function"!=typeof t.onPause||null==t.onPause)throw"'onPause' setting must be a function";if("function"!=typeof t.onRestart||null==t.onRestart)throw"'onRestart' setting must be a function";if("boolean"!=typeof t.autoStart)throw"'autoStart' setting must be 'true' or 'false'";return!0}var n=[],o={type:"asc",initTime:0,timeLimit:1e4,autoStart:!0,onBegin:function(){return null},onComplete:function(){return null},onSecondComplete:function(){return null},onStop:function(){return null},onPause:function(){return null},onRestart:function(){return null}},s=function(e,i){this.el=e,this.$el=t(e),this.interval=null,this.count=0,this.options=t.extend({},o),this.stopCtrl=!1,this.instanceNumber=n.length,n.push(this),this.$el.data("timer",this.instanceNumber),i.length>0&&"object"==typeof i[0]&&(t.extend(this.options,i[0]),this.verifyConfig(),this.$el.on("begin.timer",this.options.onBegin),this.$el.on("complete.timer",this.options.onComplete),this.$el.on("secondComplete.timer",this.options.onSecondComplete),this.$el.on("stop.timer",this.options.onStop),this.$el.on("pause.timer",this.options.onPause),this.$el.on("restart.timer",this.options.onRestart)),this.initCount()};t.extend(s.prototype,{verifyConfig:function(){i(this.options)},initCount:function(){this.count=this.options.initTime,"asc"===this.options.type.toLowerCase()?this.$el.html(e(this.count)):this.$el.html(e(this.options.initTime)),null!=this.interval&&clearInterval(this.interval);var t=this;this.callEvent("begin"),this.counting(),this.interval=setInterval(function(){t.counting.call(t)},1e3)},counting:function(){this.stopCtrl||("asc"===this.options.type.toLowerCase()?(this.count+=1,this.$el.html(e(this.count))):(this.count-=1,this.$el.html(e(this.count))),this.callEvent("secondComplete"),!1!==this.options.timeLimit&&this.options.timeLimit===this.count&&(this.stopCtrl=!0,this.callEvent("complete")))},restart:function(){this.initCount(),this.callEvent("restart")},pause:function(){this.stopCtrl=!this.stopCtrl,this.callEvent("pause")},stop:function(){this.stopCtrl=!0,this.interval&&clearInterval(this.interval),this.count=this.options.options.initCount,this.$el.html(e(this.count)),this.callEvent("stop")},callEvent:function(t){this.$el.trigger(t+".timer")},methods:{start:function(t){t.initCount()},stop:function(t){t.stop()},pause:function(t){if(!t.interval)throw"The pause method is only usable when timer is running";t.pause()},restart:function(t){if(!t.interval)throw"The restart method is only usable when timer is running";t.restart()},isPaused:function(t){return t.stopCtrl},getCurrentTime:function(t){return t.count},getFormattedCurrentTime:function(t){return e(t.count)},setCurrentTime:function(t,e){var i=e[0];if("number"!=typeof i||isNaN(i))throw"Inv√°lid value";if(i<0)throw"The value must be greater than 0.";t.count=i-1}}}),t.fn.timer=function(){var e=Array.prototype.slice.call(arguments,0);if(e.length>0&&"string"==typeof e[0]){var i=t(this).data("timer");if(void 0!==i){var o=n[i],r=e.shift();if(o.methods.hasOwnProperty(r))return o.methods[r](o,e);throw"The method "+r+" doesn't exist."}}return this.each(function(){void 0===t(this).data("timer")&&new s(this,e)})}}(jQuery);